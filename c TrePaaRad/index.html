<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitt spill</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>Memory</h1>
        <div class="klikkcontainer">
            <h2>Antall trykk:</h2>
            <p id="klikk">0</p>
        </div>
        <div class="vinner"></div>
        <div class="spill"></div>
        <button class="nystart" onclick="window.location.reload();">Pr√∏v igjen</button>

    </div>

    <script>
        const emojis = ["üòç", "üòç", "üòµ‚Äçüí´", "üòµ‚Äçüí´", "ü§©", "ü§©", "ü•≥", "ü•≥", "ü´£", "ü´£", "ü•∂", "ü•∂", "üôÑ", "üôÑ", "ü§™", "ü§™"]
        // Vi "sjuffler" emoji-listen v√•r:
        const shuf_emojis = emojis.sort(() => Math.random() - 0.5)

        // Teller for antall klikk
        const klikkDisplay = document.getElementById('klikk');
        let klikkCount = 0

        function sjekkForSeier() {
            if (document.querySelectorAll('.boxMatch').length == emojis.length) {
                const vinnerElement = document.querySelector('.vinner')
                vinnerElement.style.display = 'block' // Viser vinner-diven
                vinnerElement.textContent = 'Gratulerer, du vant med ' + klikkCount + ' trykk!' // Legger til melding
            }
        }

        // Funksjon som kalles med en liten timeout etter en boks er klikket
        // Timeouten s√∏rger for at ikke boksene lukker seg med en gang
        function boksKlikk() {
            const openBoxes = document.querySelectorAll('.boxOpen')
            if (openBoxes.length > 1) {
                // Mer enn 1 boks er √•pen: Sjekk om de er like, og lukk dem:

                if (openBoxes[0].innerHTML == openBoxes[1].innerHTML) {
                    // De er like: Marker dem
                    openBoxes[0].classList.add('boxMatch')
                    openBoxes[1].classList.add('boxMatch')

                    // Sjekk om alle er funnet:
                    sjekkForSeier()
                }

                // Lukk alle (begge) √•pne bokser:
                openBoxes.forEach(box => {
                    box.classList.remove('boxOpen')
                })

            }
        }


        for (let i = 0; i < emojis.length; i++) {
            let box = document.createElement('div')
            box.className = 'item'
            box.innerHTML = shuf_emojis[i]

            box.onclick = function () {
                // √òk klikk-telleren
                klikkCount++
                // Oppdater visning av klikk p√• skjermen
                klikkDisplay.textContent = klikkCount

                this.classList.add('boxOpen')
                // Hvis mer enn 1 boks er √•pen (helst bare 2) s√• sett en timeout 
                // som sjekker p√• match og lukker boksene igjen:
                if (document.querySelectorAll('.boxOpen').length > 1) {
                    setTimeout(boksKlikk, 500)
                }
            };


            document.querySelector('.spill').appendChild(box)
        }
    </script>
</body>